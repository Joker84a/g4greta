"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9937],{9937:(m,f,n)=>{n.r(f),n.d(f,{NewsPageModule:()=>y});var c=n(6895),h=n(433),g=n(9928),r=n(3250),t=n(4650),d=n(73),v=n(5970),o=n(2043),a=n(1923),p=n(8471);function C(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,P=t.oxw();return t.KtG(P.delete(l.id,l))}),t._UZ(1,"ion-icon",23),t._uU(2,"Elimina"),t.qZA()}}const A=function(e){return{type:e}},Z=function(e,s){return[e,s]};function M(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"th",16),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",17)(8,"div",18)(9,"button",19),t._UZ(10,"ion-icon",20),t._uU(11,"Modifica"),t.qZA()(),t.TgZ(12,"div",18),t.YNc(13,C,3,0,"button",21),t.qZA()()()),2&e){const i=s.$implicit,u=s.index,l=t.oxw();t.xp6(2),t.Oqu(u.toString()),t.xp6(2),t.Oqu(i.title),t.xp6(2),t.Oqu(i.subtitle),t.xp6(3),t.Q6J("routerLink",t.WLB(7,Z,"/add-news/"+i.id,t.VKq(5,A,l.type))),t.xp6(4),t.Q6J("ngIf",!l.as.checkType(l.type))}}const O=function(e){return["/add-news/new",e]},T=[{path:"",component:(()=>{class e{constructor(i,u,l){this.as=i,this.al=u,this.route=l,this.type=this.route.snapshot.paramMap.get("type"),this.articles=this.as.getArticles(this.as.checkType(this.type)),this.articles.subscribe(P=>{})}ngOnInit(){}delete(i,u){this.al.confirmAlert("Sicuro di voler eleminare l'elemento selezionato").then(l=>{if(l.isConfirmed)this.as.deleteArticle(i,u);else if(l.isDenied)return;this.al.closeAlert()})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(d.n),t.Y36(v.c),t.Y36(r.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-news"]],decls:35,vars:8,consts:[[1,"wrapper"],[1,"main"],[1,"content"],[1,"container-fluid","p-0"],[1,"h3","mb-3"],[1,"row"],[1,"col-12"],["type","button",1,"btn","btn-add","float-end","m-3",3,"routerLink"],[1,"card"],[1,"card-body","p-0"],["data-mdb-perfect-scrollbar","true",1,"table-responsive","table-scroll",2,"position","relative","height","700px"],[1,"table","table-striped","mb-0"],[2,"background-color","#242D3B"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row",1,"align-middle"],[1,"text-center"],[1,"m-1"],[1,"btn",3,"routerLink"],["name","create-outline"],["class","btn",3,"click",4,"ngIf"],[1,"btn",3,"click"],["name","trash-outline"]],template:function(i,u){1&i&&(t.TgZ(0,"ion-content")(1,"div",0),t._UZ(2,"app-sidenav"),t.TgZ(3,"div",1),t._UZ(4,"app-nav-backoffice"),t.TgZ(5,"main",2)(6,"div",3)(7,"h1",4)(8,"strong"),t._uU(9,"Pannello gestione"),t.qZA(),t._uU(10," Articoli"),t.qZA(),t.TgZ(11,"div",5)(12,"div",6)(13,"button",7),t._uU(14,"Aggiungi"),t.qZA()()(),t.TgZ(15,"div",5)(16,"div",6)(17,"div",8)(18,"div",9)(19,"div",10)(20,"table",11)(21,"thead",12)(22,"tr")(23,"th",13),t._uU(24,"#"),t.qZA(),t.TgZ(25,"th",13),t._uU(26,"Titolo"),t.qZA(),t.TgZ(27,"th",13),t._uU(28,"Descrizone"),t.qZA(),t.TgZ(29,"th",14),t._uU(30,"Azioni"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,M,14,10,"tr",15),t.ALo(33,"async"),t.qZA()()()()()()()()(),t._UZ(34,"app-footer-backoffice"),t.qZA()()()),2&i&&(t.xp6(13),t.Q6J("routerLink",t.VKq(6,O,t.VKq(4,A,u.type))),t.xp6(19),t.Q6J("ngForOf",t.lcZ(33,2,u.articles)))},dependencies:[c.sg,c.O5,g.W2,g.gu,g.YI,r.rH,o._,a.Q,p.s,c.Ov],styles:["table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%], .table-scroll[_ngcontent-%COMP%]{border-radius:.5rem}.table-scroll[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:1rem}thead[_ngcontent-%COMP%]{top:0;position:sticky}.btn-add[_ngcontent-%COMP%]{background-color:#242d3b;color:#fff;width:150px;margin-right:0!important}"]}),e})()}];let b=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.Bz.forChild(T),r.Bz]}),e})();var _=n(5642);let y=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,h.u5,g.Pc,b,_.K]}),e})()},73:(m,f,n)=>{n.d(f,{n:()=>t});var c=n(4650),h=n(6185),g=n(4371),r=n(5970);let t=(()=>{class d{constructor(o,a,p){this.firestore=o,this.fs=a,this.al=p,this.articlesCollection="articles",this.pagesCollection="pages"}addArticle(o,a=!1){o.created=this.fs.getServerTimestamp(),o.deleted=0,o.updated=this.fs.getServerTimestamp(),this.firestore.collection(`${a?this.pagesCollection:this.articlesCollection}`).add(o).then(p=>{p.set({id:p.id},{merge:!0}).then(()=>{}),this.al.successAlert()}).catch(()=>{this.al.errorAlert()})}getArticles(o=!1){return this.firestore.collection(o?this.pagesCollection:this.articlesCollection).valueChanges()}getArticle(o,a=!1){return this.firestore.collection(a?this.pagesCollection:this.articlesCollection).doc(o).valueChanges()}updateArticle(o,a,p=!1){return a.updated=this.fs.getServerTimestamp(),this.firestore.collection(p?this.pagesCollection:this.articlesCollection).doc(o).update(a)}deleteArticle(o,a){return this.firestore.collection(this.articlesCollection).doc(o).delete()}checkType(o){return"pages"===o}}return d.\u0275fac=function(o){return new(o||d)(c.LFG(h.ST),c.LFG(g.O),c.LFG(r.c))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},4371:(m,f,n)=>{n.d(f,{O:()=>g});var c=n(5525),h=n(4650);let g=(()=>{class r{constructor(){}getServerTimestamp(){return c.EK.now().seconds}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);