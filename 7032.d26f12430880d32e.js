"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7032],{6159:(u,p,r)=>{r.r(p),r.d(p,{AddMaterialPageModule:()=>O});var m=r(6895),n=r(433),c=r(9928),d=r(1646),f=r(7489),e=r(4650),_=r(3985),h=r(5970),v=r(2043),Z=r(1923),A=r(8471);let T=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],M=["Bytes","Kilobytes","Megabytes","Gigabytes","Pettabytes","Exabytes","Zettabytes","Yottabytes"],x=(()=>{class i{transform(t,o){let s=o?M:T,l=Math.round(Math.log(t)/Math.log(1024));l=Math.min(l,s.length-1);let g=t/Math.pow(1024,l);return`${Math.round(100*g)/100} ${s[l]}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"fileSize",type:i,pure:!0}),i})();function U(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function b(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function I(i,a){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,U,2,0,"p",16),e.YNc(2,b,2,0,"p",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.title.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.title.errors.pattern)}}function P(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function N(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function q(i,a){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,P,2,0,"p",16),e.YNc(2,N,2,0,"p",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.description.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.description.errors.pattern)}}function y(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Seleziona File"),e.qZA()(),e.TgZ(4,"ion-button",19)(5,"input",20),e.NdJ("change",function(s){e.CHM(t);const l=e.oxw(2);return e.KtG(l.fileUpload(s))}),e.qZA()()()}}function J(i,a){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"number"),e._UZ(3,"ion-progress-bar",21),e.qZA()),2&i){const t=a.ngIf;e.xp6(1),e.hij(" Caricamento: ",e.lcZ(2,2,t),"% "),e.xp6(2),e.s9C("value",t/100)}}function S(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"ion-button",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(4);return e.KtG(s.ms.ngFireUploadTask.cancel())}),e._uU(2,"Annulla"),e.qZA()()}}function Y(i,a){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"fileSize"),e.ALo(3,"fileSize"),e.YNc(4,S,3,0,"div",16),e.qZA()),2&i){const t=a.ngIf,o=e.oxw(3);e.xp6(1),e.AsE(" Dimensioni immagine: ",e.lcZ(2,3,t.totalBytes)," Caricati: ",e.lcZ(3,5,t.bytesTransferred)," "),e.xp6(3),e.Q6J("ngIf",o.ms.progressSnapshot&&t.bytesTransferred!=t.totalBytes)}}function k(i,a){if(1&i&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Files selezionato: "),e.TgZ(4,"b"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-card-content"),e.YNc(7,J,4,4,"div",16),e.ALo(8,"async"),e.YNc(9,Y,5,7,"div",16),e.ALo(10,"async"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.ms.FileName),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,3,t.ms.progressNum)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,5,t.ms.progressSnapshot))}}function w(i,a){if(1&i&&(e.TgZ(0,"div")(1,"a",23),e._uU(2,"Scarica"),e.qZA()()),2&i){const t=a.ngIf;e.xp6(1),e.Q6J("href",t,e.LSH)}}function F(i,a){if(1&i&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title")(3,"b"),e._uU(4),e.qZA(),e._uU(5," Caricata "),e.qZA()(),e.TgZ(6,"ion-card-content"),e.YNc(7,w,3,1,"div",16),e.ALo(8,"async"),e._uU(9),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(t.ms.FileName),e.xp6(3),e.Q6J("ngIf",e.lcZ(8,3,t.ms.fileUploadedPath)),e.xp6(2),e.hij(" Dimensione file: ",t.ms.FileSize," ")}}function z(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,y,6,0,"ion-card",16),e.YNc(2,k,11,7,"ion-card",16),e.YNc(3,F,10,5,"ion-card",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.ms.isImgUploading&&!t.ms.isImgUploaded),e.xp6(1),e.Q6J("ngIf",t.ms.isImgUploading&&!t.ms.isImgUploaded),e.xp6(1),e.Q6J("ngIf",!t.ms.isImgUploading&&t.ms.isImgUploaded)}}function C(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Formato link non corretto"),e.qZA())}function Q(i,a){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,C,2,0,"p",16),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.link.errors.pattern)}}function B(i,a){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"input",24),e.YNc(2,Q,2,1,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.form.controls.link.errors&&(t.form.controls.link.dirty||t.form.controls.link.touched))}}const R=[{path:"",component:(()=>{class i{constructor(t,o,s,l){this.ms=t,this.activatedRoute=o,this.router=s,this.al=l,this.isNew=!1,this.computer=!1,this.web=!1,this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.form=new n.cw({title:new n.NI("",[n.kI.pattern("^[A-Za-z0-9\xe8\xe9,. ]+$"),n.kI.required]),description:new n.NI("",[n.kI.pattern("^[A-Za-z0-9\xe8\xe9,. ]+$"),n.kI.required]),link:new n.NI("",[n.kI.required])}),f.isEmpty(this.id)||f.isNull(this.id)||f.isEqual("new",this.id)?this.isNew=!0:this.ms.getMaterial(this.id).subscribe(g=>{this.form.patchValue(g)})}onItemChange(t){this.web="web"===t.target.value}ngOnInit(){}onSubmit(){this.form.valid?(this.isNew?this.ms.addMaterial(this.form.value).then(()=>{this.al.successAlert(),this.form.reset()}).catch(()=>{this.al.errorAlert()}):this.ms.updateMaterial(this.id,this.form.value).then(()=>{this.ms.isImgUploading=!1,this.ms.isImgUploaded=!1,this.router.navigate(["/materials"])}).catch(()=>{this.al.errorAlert()}),this.al.closeAlert()):this.al.errorAlert("I campi inseriti non rispettano le regole")}onScroll(t){t.detail.currentY>0?$(".navbar").addClass("navbar-inverse"):$(".navbar").removeClass("navbar-inverse")}fileUpload(t){this.ms.fileUpload(t).subscribe(o=>{this.form.controls.link.setValue(o)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.U),e.Y36(d.gz),e.Y36(d.F0),e.Y36(h.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-material"]],decls:42,vars:5,consts:[[1,"wrapper"],[1,"main"],[1,"content"],[1,"h3","mb-3"],[1,"editor"],[1,"mt-3",3,"formGroup","ngSubmit"],[1,"h3","mb-3","mt-3"],["placeholder","Titolo","formControlName","title","required","",1,"form-control"],["class","form-control-feedback text-danger",4,"ngIf"],["placeholder","Descrizione","formControlName","description","required","",1,"form-control"],[1,"fw-bold","mx-3"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","computer","checked","",1,"form-check-input",3,"change"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","web",1,"form-check-input",3,"change"],["for","inlineRadio2",1,"form-check-label"],[4,"ngIf"],[1,"btn","btn-add","float-end","m-3"],[1,"form-control-feedback","text-danger"],["color","light"],["type","file",1,"upload",3,"change"],[3,"value"],["color","danger","fill","outline","size","small",3,"click"],["rel","nofollow","target","_blank",3,"href"],["placeholder","Link al materiale","formControlName","link","required","",1,"form-control"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content")(1,"div",0),e._UZ(2,"app-sidenav"),e.TgZ(3,"div",1),e._UZ(4,"app-nav-backoffice"),e.TgZ(5,"main",2)(6,"h1",3)(7,"strong"),e._uU(8,"Aggiungi"),e.qZA(),e._uU(9," Materiale didattico"),e.qZA(),e.TgZ(10,"div",4)(11,"form",5),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(12,"div")(13,"h3",6),e._uU(14,"Titolo"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,I,3,2,"div",8),e.qZA(),e.TgZ(17,"div")(18,"h3",6),e._uU(19,"Descrizione"),e.qZA(),e._UZ(20,"input",9),e.YNc(21,q,3,2,"div",8),e.qZA(),e.TgZ(22,"div")(23,"div")(24,"h3",6),e._uU(25,"Link"),e.qZA(),e.TgZ(26,"div")(27,"label",10),e._uU(28,"Upload file da: "),e.qZA(),e.TgZ(29,"div",11)(30,"input",12),e.NdJ("change",function(l){return o.onItemChange(l)}),e.qZA(),e.TgZ(31,"label",13),e._uU(32,"Computer"),e.qZA()(),e.TgZ(33,"div",11)(34,"input",14),e.NdJ("change",function(l){return o.onItemChange(l)}),e.qZA(),e.TgZ(35,"label",15),e._uU(36,"Link esterno"),e.qZA()()()(),e.YNc(37,z,4,3,"div",16),e.YNc(38,B,3,1,"div",16),e.qZA(),e.TgZ(39,"button",17),e._uU(40,"Pubblica"),e.qZA()()()(),e._UZ(41,"app-footer-backoffice"),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",o.form.controls.title.errors&&(o.form.controls.title.dirty||o.form.controls.title.touched)),e.xp6(5),e.Q6J("ngIf",o.form.controls.description.errors&&(o.form.controls.description.dirty||o.form.controls.description.touched)),e.xp6(16),e.Q6J("ngIf",!o.web),e.xp6(1),e.Q6J("ngIf",o.web))},dependencies:[m.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,c.YG,c.PM,c.FN,c.Zi,c.Dq,c.W2,c.X7,n.sg,n.u,v._,Z.Q,A.s,m.Ov,m.JJ,x],styles:[".btn-add[_ngcontent-%COMP%]{background-color:#242d3b;color:#fff;width:150px;margin-right:0!important}"]}),i})()}];let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(R),d.Bz]}),i})();var E=r(5642);let O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,n.u5,c.Pc,L,n.UX,E.K]}),i})()},4371:(u,p,r)=>{r.d(p,{O:()=>c});var m=r(5525),n=r(4650);let c=(()=>{class d{constructor(){}getServerTimestamp(){return m.EK.now().seconds}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=n.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);