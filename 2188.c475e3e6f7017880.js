"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2188],{2188:(v,u,o)=>{o.r(u),o.d(u,{AddNewsPageModule:()=>Q});var d=o(6895),r=o(433),g=o(9928),l=o(3250),p=o(7489),e=o(4650),f=o(73),s=o(5970),c=o(8635),m=o(2043),Z=o(1923),_=o(8471);function N(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function T(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function C(t,n){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,N,2,0,"p",15),e.YNc(2,T,2,0,"p",15),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.title.errors.required),e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.title.errors.pattern)}}function F(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function P(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function I(t,n){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,F,2,0,"p",15),e.YNc(2,P,2,0,"p",15),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.subtitle.errors.required),e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.subtitle.errors.pattern)}}function w(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function x(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function b(t,n){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,w,2,0,"p",15),e.YNc(2,x,2,0,"p",15),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.img.errors.required),e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.img.errors.pattern)}}function y(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function U(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function M(t,n){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,y,2,0,"p",15),e.YNc(2,U,2,0,"p",15),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.text.errors.required),e.xp6(1),e.Q6J("ngIf",i.editorFrom.controls.text.errors.pattern)}}const J=function(){return{height:"350px"}},S=[{path:"",component:(()=>{class t{constructor(i,a,A,E){if(this.as=i,this.activatedRoute=a,this.router=A,this.al=E,this.isNew=!1,this.quillConfiguration={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]}],["link"],["clean"],["image"],[{align:[]}]]},this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.type=this.activatedRoute.snapshot.paramMap.get("type"),this.editorFrom=new r.cw({text:new r.NI("",[r.kI.required]),subtitle:new r.NI("",[r.kI.pattern("^[A-Za-z0-9\xe8\xe9,. ]+$"),r.kI.required]),title:new r.NI("",[r.kI.pattern("^[A-Za-z0-9\xe8\xe9,. ]+$"),r.kI.required]),img:new r.NI("assets/imgs/bg-home.jpg")}),p.isEmpty(this.id)||p.isNull(this.id)||p.isEqual("new",this.id))this.isNew=!0;else try{this.as.getArticle(this.id,this.as.checkType(this.type)).subscribe(h=>{this.editorFrom.patchValue(h)})}catch(h){console.log(h)}}ngOnInit(){}onSubmit(){this.editorFrom.valid?(this.isNew?this.as.addArticle(this.editorFrom.value,this.as.checkType(this.type)):this.as.updateArticle(this.id,this.editorFrom.value,this.as.checkType(this.type)).then(()=>this.router.navigate(["/news"])),this.al.closeAlert()):this.al.errorAlert("I campi inseriti non rispettano le regole")}onScroll(i){i.detail.currentY>0?$(".navbar").addClass("navbar-inverse"):$(".navbar").removeClass("navbar-inverse")}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(f.n),e.Y36(l.gz),e.Y36(l.F0),e.Y36(s.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-news"]],decls:32,vars:8,consts:[[1,"wrapper"],[1,"main"],[1,"content"],[1,"h3","mb-3"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"h3","mb-3","mt-3"],["placeholder","Inserisci il titolo dell'articolo ...","formControlName","title","required","",1,"form-control"],["class","form-control-feedback text-danger",4,"ngIf"],["placeholder","Inserisci il link all'immagine di copertina","formControlName","subtitle","required","",1,"form-control"],[1,"d-none"],["placeholder","Inserisci il link all'immagine di copertina","formControlName","img","required","",1,"form-control"],[1,"mt-5"],["formControlName","text",3,"styles","modules"],[1,"btn","btn-add","float-end","m-3"],[1,"form-control-feedback","text-danger"],[4,"ngIf"]],template:function(i,a){1&i&&(e.TgZ(0,"ion-content")(1,"div",0),e._UZ(2,"app-sidenav"),e.TgZ(3,"div",1),e._UZ(4,"app-nav-backoffice"),e.TgZ(5,"main",2)(6,"h1",3)(7,"strong"),e._uU(8,"Aggiungi"),e.qZA(),e._uU(9," Articolo"),e.qZA(),e.TgZ(10,"form",4),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(11,"div")(12,"h3",5),e._uU(13,"Titolo"),e.qZA(),e._UZ(14,"input",6),e.YNc(15,C,3,2,"div",7),e.qZA(),e.TgZ(16,"div")(17,"h3",5),e._uU(18,"Sottotitolo"),e.qZA(),e._UZ(19,"input",8),e.YNc(20,I,3,2,"div",7),e.qZA(),e.TgZ(21,"div",9)(22,"h3",5),e._uU(23,"Immagine di copertina"),e.qZA(),e._UZ(24,"input",10),e.YNc(25,b,3,2,"div",7),e.qZA(),e.TgZ(26,"div",11),e._UZ(27,"quill-editor",12),e.YNc(28,M,3,2,"div",7),e.qZA(),e.TgZ(29,"button",13),e._uU(30,"Pubblica"),e.qZA()()(),e._UZ(31,"app-footer-backoffice"),e.qZA()()()),2&i&&(e.xp6(10),e.Q6J("formGroup",a.editorFrom),e.xp6(5),e.Q6J("ngIf",a.editorFrom.controls.title.errors&&(a.editorFrom.controls.title.dirty||a.editorFrom.controls.title.touched)),e.xp6(5),e.Q6J("ngIf",a.editorFrom.controls.subtitle.errors&&(a.editorFrom.controls.subtitle.dirty||a.editorFrom.controls.subtitle.touched)),e.xp6(5),e.Q6J("ngIf",a.editorFrom.controls.img.errors&&(a.editorFrom.controls.img.dirty||a.editorFrom.controls.img.touched)),e.xp6(2),e.Q6J("styles",e.DdM(7,J))("modules",a.quillConfiguration),e.xp6(1),e.Q6J("ngIf",a.editorFrom.controls.text.errors&&(a.editorFrom.controls.text.dirty||a.editorFrom.controls.text.touched)))},dependencies:[d.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,g.W2,c.g6,r.sg,r.u,m._,Z.Q,_.s],styles:[".editor[_ngcontent-%COMP%]{margin-top:70px}.nav-news[_ngcontent-%COMP%]{background-color:#000!important}.btn-add[_ngcontent-%COMP%]{background-color:#242d3b;color:#fff;width:150px;margin-right:0!important}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(S),l.Bz]}),t})();var q=o(5642);let Q=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,r.u5,g.Pc,Y,c.fi,r.UX,q.K]}),t})()},73:(v,u,o)=>{o.d(u,{n:()=>p});var d=o(4650),r=o(6185),g=o(4371),l=o(5970);let p=(()=>{class e{constructor(s,c,m){this.firestore=s,this.fs=c,this.al=m,this.articlesCollection="articles",this.pagesCollection="pages"}addArticle(s,c=!1){s.created=this.fs.getServerTimestamp(),s.deleted=0,s.updated=this.fs.getServerTimestamp(),this.firestore.collection(`${c?this.pagesCollection:this.articlesCollection}`).add(s).then(m=>{m.set({id:m.id},{merge:!0}).then(()=>{}),this.al.successAlert()}).catch(()=>{this.al.errorAlert()})}getArticles(s=!1){return this.firestore.collection(s?this.pagesCollection:this.articlesCollection).valueChanges()}getArticle(s,c=!1){return this.firestore.collection(c?this.pagesCollection:this.articlesCollection).doc(s).valueChanges()}updateArticle(s,c,m=!1){return c.updated=this.fs.getServerTimestamp(),this.firestore.collection(m?this.pagesCollection:this.articlesCollection).doc(s).update(c)}deleteArticle(s,c){return this.firestore.collection(this.articlesCollection).doc(s).delete()}checkType(s){return"pages"===s}}return e.\u0275fac=function(s){return new(s||e)(d.LFG(r.ST),d.LFG(g.O),d.LFG(l.c))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4371:(v,u,o)=>{o.d(u,{O:()=>g});var d=o(5525),r=o(4650);let g=(()=>{class l{constructor(){}getServerTimestamp(){return d.EK.now().seconds}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);