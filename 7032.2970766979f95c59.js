"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7032],{6159:(u,m,n)=>{n.r(m),n.d(m,{AddMaterialPageModule:()=>ie});var p=n(6895),a=n(433),s=n(9928),d=n(1646),f=n(7489),e=n(4650),g=n(3985),Z=n(5970),h=n(2043),v=n(1923),A=n(8471);let T=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],x=["Bytes","Kilobytes","Megabytes","Gigabytes","Pettabytes","Exabytes","Zettabytes","Yottabytes"],M=(()=>{class t{transform(i,r){let c=r?x:T,l=Math.round(Math.log(i)/Math.log(1024));l=Math.min(l,c.length-1);let _=i/Math.pow(1024,l);return`${Math.round(100*_)/100} ${c[l]}`}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=e.Yjl({name:"fileSize",type:t,pure:!0}),t})();function U(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function I(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function q(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,U,2,0,"p",20),e.YNc(2,I,2,0,"p",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.form.controls.title.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.title.errors.pattern)}}function N(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function P(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function b(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,N,2,0,"p",20),e.YNc(2,P,2,0,"p",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.form.controls.description.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.description.errors.pattern)}}function y(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function J(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function Y(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,y,2,0,"p",20),e.YNc(2,J,2,0,"p",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.form.controls.authors.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.authors.errors.pattern)}}function k(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function C(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function w(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,k,2,0,"p",20),e.YNc(2,C,2,0,"p",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.form.controls.type.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.type.errors.pattern)}}function Q(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Campo richiesto"),e.qZA())}function S(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function z(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,Q,2,0,"p",20),e.YNc(2,S,2,0,"p",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.form.controls.date.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.date.errors.pattern)}}function F(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Carratteri speciali non ammessi"),e.qZA())}function B(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,F,2,0,"p",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.form.controls.link_en.errors.pattern)}}function L(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Seleziona File"),e.qZA()(),e.TgZ(4,"ion-button",23)(5,"input",24),e.NdJ("change",function(c){e.CHM(i);const l=e.oxw(2);return e.KtG(l.fileUpload(c))}),e.qZA()()()}}function R(t,o){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"number"),e._UZ(3,"ion-progress-bar",25),e.qZA()),2&t){const i=o.ngIf;e.xp6(1),e.hij(" Caricamento: ",e.lcZ(2,2,i),"% "),e.xp6(2),e.s9C("value",i/100)}}function E(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"ion-button",26),e.NdJ("click",function(){e.CHM(i);const c=e.oxw(4);return e.KtG(c.ms.ngFireUploadTask.cancel())}),e._uU(2,"Annulla"),e.qZA()()}}function O(t,o){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"fileSize"),e.ALo(3,"fileSize"),e.YNc(4,E,3,0,"div",20),e.qZA()),2&t){const i=o.ngIf,r=e.oxw(3);e.xp6(1),e.AsE(" Dimensioni immagine: ",e.lcZ(2,3,i.totalBytes)," Caricati: ",e.lcZ(3,5,i.bytesTransferred)," "),e.xp6(3),e.Q6J("ngIf",r.ms.progressSnapshot&&i.bytesTransferred!=i.totalBytes)}}function G(t,o){if(1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Files selezionato: "),e.TgZ(4,"b"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-card-content"),e.YNc(7,R,4,4,"div",20),e.ALo(8,"async"),e.YNc(9,O,5,7,"div",20),e.ALo(10,"async"),e.qZA()()),2&t){const i=e.oxw(2);e.xp6(5),e.Oqu(i.ms.FileName),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,3,i.ms.progressNum)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,5,i.ms.progressSnapshot))}}function D(t,o){if(1&t&&(e.TgZ(0,"div")(1,"a",27),e._uU(2,"Scarica"),e.qZA()()),2&t){const i=o.ngIf;e.xp6(1),e.Q6J("href",i,e.LSH)}}function j(t,o){if(1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title")(3,"b"),e._uU(4),e.qZA(),e._uU(5," Caricata "),e.qZA()(),e.TgZ(6,"ion-card-content"),e.YNc(7,D,3,1,"div",20),e.ALo(8,"async"),e._uU(9),e.qZA()()),2&t){const i=e.oxw(2);e.xp6(4),e.Oqu(i.ms.FileName),e.xp6(3),e.Q6J("ngIf",e.lcZ(8,3,i.ms.fileUploadedPath)),e.xp6(2),e.hij(" Dimensione file: ",i.ms.FileSize," ")}}function K(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,L,6,0,"ion-card",20),e.YNc(2,G,11,7,"ion-card",20),e.YNc(3,j,10,5,"ion-card",20),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.ms.isImgUploading&&!i.ms.isImgUploaded),e.xp6(1),e.Q6J("ngIf",i.ms.isImgUploading&&!i.ms.isImgUploaded),e.xp6(1),e.Q6J("ngIf",!i.ms.isImgUploading&&i.ms.isImgUploaded)}}function H(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Formato link non corretto"),e.qZA())}function V(t,o){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,H,2,0,"p",20),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.form.controls.link.errors.pattern)}}function X(t,o){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"input",28),e.YNc(2,V,2,1,"div",8),e.qZA()),2&t){const i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.form.controls.link.errors&&(i.form.controls.link.dirty||i.form.controls.link.touched))}}const W=[{path:"",component:(()=>{class t{constructor(i,r,c,l){this.ms=i,this.activatedRoute=r,this.router=c,this.al=l,this.isNew=!1,this.computer=!1,this.web=!1,this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.form=new a.cw({title:new a.NI("",[a.kI.pattern("^[A-Za-z0-9\xe8\xe9\xe0,()'. ]+$"),a.kI.required]),description:new a.NI("",[a.kI.pattern("^[A-Za-z0-9\xe8\xe9\xe0,()'. ]+$"),a.kI.required]),link:new a.NI("",[a.kI.required]),authors:new a.NI("",[a.kI.required]),date:new a.NI("",[a.kI.required]),type:new a.NI("",[a.kI.required]),link_en:new a.NI("",[])}),f.isEmpty(this.id)||f.isNull(this.id)||f.isEqual("new",this.id)?this.isNew=!0:this.ms.getMaterial(this.id).subscribe(_=>{this.form.patchValue(_)})}onItemChange(i){this.web="web"===i.target.value}ngOnInit(){}onSubmit(){this.form.valid?(this.isNew?this.ms.addMaterial(this.form.value).then(()=>{this.al.successAlert(),this.form.reset()}).catch(i=>{console.log(i),this.al.errorAlert()}):(console.log(this.form.value),this.ms.updateMaterial(this.id,this.form.value).then(()=>{this.ms.isImgUploading=!1,this.ms.isImgUploaded=!1,this.router.navigate(["/materials"])}).catch(i=>{console.log(i),this.al.errorAlert()})),this.al.closeAlert()):(console.log("qua"),this.al.errorAlert("I campi inseriti non rispettano le regole"))}onScroll(i){i.detail.currentY>0?$(".navbar").addClass("navbar-inverse"):$(".navbar").removeClass("navbar-inverse")}fileUpload(i){this.ms.fileUpload(i).subscribe(r=>{this.form.controls.link.setValue(r)})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(g.U),e.Y36(d.gz),e.Y36(d.F0),e.Y36(Z.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-material"]],decls:62,vars:9,consts:[[1,"wrapper"],[1,"main"],[1,"content"],[1,"h3","mb-3"],[1,"editor"],[1,"mt-3",3,"formGroup","ngSubmit"],[1,"h3","mb-3","mt-3"],["placeholder","Titolo","formControlName","title","required","",1,"form-control"],["class","form-control-feedback text-danger",4,"ngIf"],["placeholder","Descrizione","formControlName","description","required","",1,"form-control"],["placeholder","Autori","formControlName","authors","required","",1,"form-control"],["placeholder","Lezione, Tutorial, Extra","formControlName","type","required","",1,"form-control"],["placeholder","Data","formControlName","date","required","",1,"form-control"],["placeholder","link_en","formControlName","link_en",1,"form-control"],[1,"fw-bold","mx-3"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","computer","checked","",1,"form-check-input",3,"change"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","web",1,"form-check-input",3,"change"],["for","inlineRadio2",1,"form-check-label"],[4,"ngIf"],[1,"btn","btn-add","float-end","m-3"],[1,"form-control-feedback","text-danger"],["color","light"],["type","file",1,"upload",3,"change"],[3,"value"],["color","danger","fill","outline","size","small",3,"click"],["rel","nofollow","target","_blank",3,"href"],["placeholder","Link al materiale","formControlName","link","required","",1,"form-control"]],template:function(i,r){1&i&&(e.TgZ(0,"ion-content")(1,"div",0),e._UZ(2,"app-sidenav"),e.TgZ(3,"div",1),e._UZ(4,"app-nav-backoffice"),e.TgZ(5,"main",2)(6,"h1",3)(7,"strong"),e._uU(8,"Aggiungi"),e.qZA(),e._uU(9," Materiale didattico"),e.qZA(),e.TgZ(10,"div",4)(11,"form",5),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(12,"div")(13,"h3",6),e._uU(14,"Titolo"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,q,3,2,"div",8),e.qZA(),e.TgZ(17,"div")(18,"h3",6),e._uU(19,"Descrizione"),e.qZA(),e._UZ(20,"input",9),e.YNc(21,b,3,2,"div",8),e.qZA(),e.TgZ(22,"div")(23,"h3",6),e._uU(24,"Autori"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Y,3,2,"div",8),e.qZA(),e.TgZ(27,"div")(28,"h3",6),e._uU(29,"Tipo"),e.qZA(),e._UZ(30,"input",11),e.YNc(31,w,3,2,"div",8),e.qZA(),e.TgZ(32,"div")(33,"h3",6),e._uU(34,"Data"),e.qZA(),e._UZ(35,"input",12),e.YNc(36,z,3,2,"div",8),e.qZA(),e.TgZ(37,"div")(38,"h3",6),e._uU(39,"Link inglese"),e.qZA(),e._UZ(40,"input",13),e.YNc(41,B,2,1,"div",8),e.qZA(),e.TgZ(42,"div")(43,"div")(44,"h3",6),e._uU(45,"Link"),e.qZA(),e.TgZ(46,"div")(47,"label",14),e._uU(48,"Upload file da: "),e.qZA(),e.TgZ(49,"div",15)(50,"input",16),e.NdJ("change",function(l){return r.onItemChange(l)}),e.qZA(),e.TgZ(51,"label",17),e._uU(52,"Computer"),e.qZA()(),e.TgZ(53,"div",15)(54,"input",18),e.NdJ("change",function(l){return r.onItemChange(l)}),e.qZA(),e.TgZ(55,"label",19),e._uU(56,"Link esterno"),e.qZA()()()(),e.YNc(57,K,4,3,"div",20),e.YNc(58,X,3,1,"div",20),e.qZA(),e.TgZ(59,"button",21),e._uU(60,"Pubblica"),e.qZA()()()(),e._UZ(61,"app-footer-backoffice"),e.qZA()()()),2&i&&(e.xp6(11),e.Q6J("formGroup",r.form),e.xp6(5),e.Q6J("ngIf",r.form.controls.title.errors&&(r.form.controls.title.dirty||r.form.controls.title.touched)),e.xp6(5),e.Q6J("ngIf",r.form.controls.description.errors&&(r.form.controls.description.dirty||r.form.controls.description.touched)),e.xp6(5),e.Q6J("ngIf",r.form.controls.authors.errors&&(r.form.controls.authors.dirty||r.form.controls.authors.touched)),e.xp6(5),e.Q6J("ngIf",r.form.controls.type.errors&&(r.form.controls.type.dirty||r.form.controls.type.touched)),e.xp6(5),e.Q6J("ngIf",r.form.controls.date.errors&&(r.form.controls.date.dirty||r.form.controls.date.touched)),e.xp6(5),e.Q6J("ngIf",r.form.controls.link_en.errors&&(r.form.controls.link_en.dirty||r.form.controls.link_en.touched)),e.xp6(16),e.Q6J("ngIf",!r.web),e.xp6(1),e.Q6J("ngIf",r.web))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,s.YG,s.PM,s.FN,s.Zi,s.Dq,s.W2,s.X7,a.sg,a.u,h._,v.Q,A.s,p.Ov,p.JJ,M],styles:[".btn-add[_ngcontent-%COMP%]{background-color:#242d3b;color:#fff;width:150px;margin-right:0!important}"]}),t})()}];let ee=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(W),d.Bz]}),t})();var te=n(5642);let ie=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,a.u5,s.Pc,ee,a.UX,te.K]}),t})()},4371:(u,m,n)=>{n.d(m,{O:()=>s});var p=n(5525),a=n(4650);let s=(()=>{class d{constructor(){}getServerTimestamp(){return p.EK.now().seconds}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);